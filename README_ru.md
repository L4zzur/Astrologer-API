# Astrologer API

Astrologer API — это RESTful-сервис, предоставляющий обширные астрологические расчёты, разработанный для лёгкой интеграции в проекты. Он предлагает набор астрологических карт и данных, что делает его незаменимым инструментом как для разработчиков, так и для энтузиастов астрологии.

Вот пример натальной карты, сгенерированной с помощью Astrologer API:

![John Lenon Chart](https://raw.githubusercontent.com/g-battaglia/kerykeion/refs/heads/main/tests/charts/svg/John%20Lennon%20-%20Dark%20Theme%20-%20Natal%20Chart.svg)

## Быстрый обзор эндпоинтов

| Эндпоинт                          | Метод | Описание |
|-----------------------------------|--------|----------|
| `/api/v4/birth-chart`            | POST   | Генерирует полную натальную карту в формате SVG, включая положения планет и аспекты. |
| `/api/v4/synastry-chart`         | POST   | Создаёт синастрическую карту для сравнения двух людей, отображая их взаимодействие и совместимость вместе с визуальным SVG-представлением. |
| `/api/v4/transit-chart`          | POST   | Генерирует транзитную карту для человека, показывая текущие планетарные влияния, с визуальным SVG-представлением. |
| `/api/v4/composite-chart`        | POST   | Вычисляет композитную карту для двух людей методом срединных точек, включая аспекты и визуальное SVG-представление. |
| `/api/v4/relationship-score`     | POST   | Рассчитывает оценку совместимости (0-44) по методу Чиро Дичеполо для оценки потенциала отношений. |
| `/api/v4/natal-aspects-data`     | POST   | Предоставляет детальные данные натальной карты и аспекты без визуальной карты. |
| `/api/v4/synastry-aspects-data`  | POST   | Возвращает данные синастрии и аспекты между двумя людьми без SVG-карты. |
| `/api/v4/transit-aspects-data`   | POST   | Предоставляет данные транзитной карты и аспекты для человека без SVG-визуализации. |
| `/api/v4/composite-aspects-data` | POST   | Предоставляет данные композитной карты и аспекты без генерации SVG-карты. |
| `/api/v4/birth-data`             | POST   | Возвращает основные данные натальной карты без аспектов и визуального представления. |
| `/api/v4/now`                    | GET    | Получает данные натальной карты для текущего времени UTC, без аспектов и визуальной карты. |

## Подробное объяснение

### Натальная карта (Birth Chart) — `/api/v4/birth-chart`
**Что это:** Натальная карта (или карта рождения) — это снимок неба в момент вашего рождения. Она показывает, где находились все планеты в этот момент относительно Земли.

**Зачем нужна:** Это основа астрологии. Натальная карта считается "картой личности" человека — она показывает характер, таланты, слабости, жизненные задачи и потенциал. Астрологи верят, что положения планет в момент рождения влияют на всю жизнь человека.

**Что запрашивает:** Дату, время и место рождения (город, широту, долготу, часовой пояс).

**Изменяемость:** Натальная карта **никогда не меняется** — это фиксированный снимок неба в момент вашего рождения. Она остаётся постоянной на протяжении всей жизни.

### Синастрическая карта (Synastry Chart) — `/api/v4/synastry-chart`
**Что это:** Синастрия — это сравнение натальных карт двух людей для анализа их взаимоотношений.

**Зачем нужна:** Используется для оценки совместимости в романтических отношениях, дружбе, деловом партнёрстве. Показывает, как планеты одного человека взаимодействуют с планетами другого, какие могут быть конфликты и гармонии в отношениях.

**Что запрашивает:** Данные рождения двух людей (дата, время, место для каждого).

**Изменяемость:** Синастрическая карта **не меняется**, так как основана на двух фиксированных натальных картах. Однако взаимоотношения людей развиваются, поэтому интерпретация может углубляться.

### Транзитная карта (Transit Chart) — `/api/v4/transit-chart`
**Что это:** Транзитная карта показывает, где находятся планеты **прямо сейчас** (или в конкретный момент времени) относительно вашей натальной карты.

**Зачем нужна:** Используется для прогнозов и предсказаний. Транзиты показывают текущие влияния планет на вашу жизнь — периоды роста, вызовов, важных изменений. Например, транзит Юпитера может принести удачу и рост, а транзит Сатурна — уроки и трудности.

**Что запрашивает:** Вашу натальную информацию (дата, время, место рождения) и время/дату, для которой нужно построить транзиты (обычно текущее время или будущая дата).

**Изменяемость:** Транзитная карта **постоянно меняется**, потому что планеты движутся. Каждый день, час, минута — новое положение планет, новые влияния.

### Композитная карта (Composite Chart) — `/api/v4/composite-chart`
**Что это:** Композитная карта — это "карта отношений", созданная путём вычисления срединных точек между планетами двух людей.

**Зачем нужна:** Показывает не каждого человека отдельно, а саму природу отношений как отдельной сущности. Используется для понимания динамики пары, их общих целей, вызовов и потенциала отношений.

**Что запрашивает:** Данные рождения двух людей (дата, время, место для каждого).

**Изменяемость:** Композитная карта **не меняется** после создания, так как основана на двух фиксированных натальных картах. Она представляет постоянную "личность" отношений.

### Оценка совместимости (Relationship Score) — `/api/v4/relationship-score`
**Что это:** Числовая оценка совместимости двух людей по методу итальянского астролога Чиро Дичеполо.

**Зачем нужна:** Даёт быстрый количественный показатель совместимости (от 0 до 44 баллов). Чем выше балл, тем лучше потенциал отношений.

**Что запрашивает:** Данные рождения двух людей (дата, время, место для каждого).

**Изменяемость:** Оценка **не меняется**, так как основана на фиксированных натальных картах.

### Данные натальных аспектов (Natal Aspects Data) — `/api/v4/natal-aspects-data`
**Что это:** Детальная информация о положениях планет и аспектах (угловых соотношениях между планетами) в натальной карте, но без визуального изображения.

**Зачем нужна:** Для получения структурированных данных (JSON) для дальнейшей обработки или создания собственной визуализации. Аспекты показывают, как планеты "разговаривают" друг с другом в вашей карте.

**Что запрашивает:** Дату, время и место рождения.

**Изменяемость:** Данные **не меняются** — это всё та же натальная карта, только в формате данных.

### Данные синастрических аспектов (Synastry Aspects Data) — `/api/v4/synastry-aspects-data`
**Что это:** Структурированные данные об аспектах между натальными картами двух людей без визуальной карты.

**Зачем нужна:** Для программной обработки данных совместимости и создания собственных интерпретаций или визуализаций.

**Что запрашивает:** Данные рождения двух людей.

**Изменяемость:** Данные **не меняются**.

### Данные транзитных аспектов (Transit Aspects Data) — `/api/v4/transit-aspects-data`
**Что это:** Структурированные данные о текущих транзитах без визуального представления.

**Зачем нужна:** Для программной обработки транзитных прогнозов, создания уведомлений о важных транзитах, автоматических гороскопов.

**Что запрашивает:** Натальные данные и время/дату для транзитов.

**Изменяемость:** Данные **постоянно меняются** с движением планет.

### Данные композитных аспектов (Composite Aspects Data) — `/api/v4/composite-aspects-data`
**Что это:** Структурированные данные композитной карты без SVG-визуализации.

**Зачем нужна:** Для программной обработки данных о природе отношений пары.

**Что запрашивает:** Данные рождения двух людей.

**Изменяемость:** Данные **не меняются**.

### Базовые данные рождения (Birth Data) — `/api/v4/birth-data`
**Что это:** Упрощённые данные натальной карты без аспектов — только положения планет и домов.

**Зачем нужна:** Для быстрого получения основной информации о положениях планет без детального анализа аспектов.

**Что запрашивает:** Дату, время и место рождения.

**Изменяемость:** Данные **не меняются**.

### Текущий момент (Now) — `/api/v4/now`
**Что это:** Натальная карта для текущего момента UTC (всемирное координированное время).

**Зачем нужна:** Для получения "карты текущего момента" — что происходит в космосе прямо сейчас. Может использоваться для хорарной астрологии (ответы на вопросы) или для понимания общей энергии дня.

**Что запрашивает:** Ничего — использует текущее время UTC и нулевые координаты.

**Изменяемость:** **Постоянно меняется** с каждой секундой.

### Резюме: какие карты меняются, а какие нет

**Никогда не меняются:**
- Натальная карта (Birth Chart)
- Синастрическая карта (Synastry Chart)
- Композитная карта (Composite Chart)
- Оценка совместимости (Relationship Score)
- Все эндпоинты с `-data` для натальных, синастрических и композитных карт

**Постоянно меняются:**
- Транзитная карта (Transit Chart)
- Данные транзитных аспектов (Transit Aspects Data)
- Текущий момент (Now)

## Документация

Изучите полную документацию API:

- [Документация Swagger](https://www.kerykeion.net/astrologer-api-swagger/): Интерактивная документация с детальной информацией обо всех эндпоинтах и параметрах.

- [Документация Redoc](https://www.kerykeion.net/astrologer-api-redoc/): Чистый, удобный интерфейс документации для лёгкого ознакомления.

- [Спецификация OpenAPI](https://raw.githubusercontent.com/g-battaglia/Astrologer-API/main/openapi.json): Полная спецификация OpenAPI для Astrologer API.

## Начало работы

Чтобы начать использовать Astrologer API, включите ваш API-ключ в заголовки запросов. Этот ключ необходим для аутентификации запросов и их корректной обработки.

### Пример заголовков запроса

Убедитесь, что ваши API-запросы включают следующие заголовки:

```javascript
headers: {
    'X-RapidAPI-Host': 'astrologer.p.rapidapi.com',
    'X-RapidAPI-Key': 'YOUR_API_KEY'
    }
```


Замените `YOUR_API_KEY` на ваш реальный API-ключ, полученный при регистрации.

## Возможности

### Карты

Astrologer API предоставляет различные эндпоинты `*-chart` с настраиваемыми опциями:

#### Языки

Вы можете указать параметр `lang` для выбора языка вашей карты. Доступные опции:

- `EN`: Английский (по умолчанию)
- `FR`: Французский
- `PT`: Португальский
- `ES`: Испанский
- `TR`: Турецкий
- `RU`: Русский
- `IT`: Итальянский
- `CN`: Китайский
- `DE`: Немецкий
- `HI`: Хинди

Пример API-запроса:

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "longitude": 0,
        "latitude": 51.4825766,
        "city": "London",
        "nation": "GB",
        "timezone": "Europe/London",
        "name": "John Doe",
        "zodiac_type": "Tropic"
    },
    "language": "RU"
}
```

#### Темы оформления

Настройте внешний вид ваших карт с помощью параметра `theme`. Доступные темы:

- `light`: Современная светлая тема с мягкими цветами

![John Lennon Chart Example](https://raw.githubusercontent.com/g-battaglia/kerykeion/refs/heads/main/tests/charts/svg/John%20Lennon%20-%20Light%20Theme%20-%20Natal%20Chart.svg)

- `dark`: Современная тёмная тема
  
![John Lennon Chart Example](https://raw.githubusercontent.com/g-battaglia/kerykeion/refs/heads/main/tests/charts/svg/John%20Lennon%20-%20Dark%20Theme%20-%20Natal%20Chart.svg)

- `dark-high-contrast`: Тёмная тема с высокой контрастностью

![John Lennon Chart Example](https://raw.githubusercontent.com/g-battaglia/kerykeion/refs/heads/main/tests/charts/svg/John%20Lennon%20-%20Dark%20High%20Contrast%20Theme%20-%20Natal%20Chart.svg)

- `classic`: Традиционная красочная тема

![Albert Einstein Chart Example](https://raw.githubusercontent.com/g-battaglia/kerykeion/refs/heads/main/tests/charts/svg/Albert%20Einstein%20-%20Natal%20Chart.svg)

Пример API-запроса:

```json
{
    "subject": { /* ... */ },
    "theme": "dark"
}
```


### Типы зодиака

Вы можете выбрать между сидерическим и тропическим зодиаком, используя параметр `zodiac_type` в ключе `subject` большинства эндпоинтов.

**Объяснение:** В астрологии существуют две основные системы зодиака. Тропический зодиак (используется в западной астрологии) привязан к сезонам года. Сидерический зодиак (используется в ведической/индийской астрологии) привязан к фактическим созвездиям на небе. Из-за прецессии земной оси между ними есть разница примерно в 24 градуса.

- `tropic`: Тропический зодиак (по умолчанию)
- `sidereal`: Сидерический зодиак

Если вы выбираете `sidereal`, вы также должны указать параметр `sidereal_mode`, который предлагает различные айанамши (методы зодиакальных расчётов):

- `FAGAN_BRADLEY`
- `LAHIRI` (стандарт для ведической астрологии)
- `DELUCE`
- `RAMAN`
- `USHASHASHI`
- `KRISHNAMURTI`
- `DJWHAL_KHUL`
- `YUKTESHWAR`
- `JN_BHASIN`
- `BABYL_KUGLER1`
- `BABYL_KUGLER2`
- `BABYL_KUGLER3`
- `BABYL_HUBER`
- `BABYL_ETPSC`
- `ALDEBARAN_15TAU`
- `HIPPARCHOS`
- `SASSANIAN`
- `J2000`
- `J1900`
- `B1950`

Наиболее часто используемые айанамши — `FAGAN_BRADLEY` и `LAHIRI`.

Пример API-запроса:

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "longitude": 0,
        "latitude": 51.4825766,
        "city": "London",
        "nation": "GB",
        "timezone": "Europe/London",
        "name": "John Doe",
        "zodiac_type": "Sidereal",
        "sidereal_mode": "FAGAN_BRADLEY"
    }
}
```


### Системы домов

Параметр `HouseSystem` определяет метод разделения небесной сферы на двенадцать домов.

**Объяснение:** В астрологии небо делится на 12 секторов, называемых домами. Каждый дом отвечает за определённую сферу жизни (личность, финансы, коммуникация, семья и т.д.). Существуют разные математические методы разделения неба на дома.

Доступные опции:

- **A**: Equal (Равные)
- **B**: Alcabitius (Алькабитиус)
- **C**: Campanus (Кампанус)
- **D**: Equal (MC) (Равные от МС)
- **F**: Carter poli-equ. (Картер)
- **H**: Horizon/Azimut (Горизонт/Азимут)
- **I**: Sunshine (Саншайн)
- **i**: Sunshine/Alt. (Саншайн альтернативный)
- **K**: Koch (Кох)
- **L**: Pullen SD (Пуллен SD)
- **M**: Morinus (Моринус)
- **N**: Equal/1=Aries (Равные от Овна)
- **O**: Porphyry (Порфирий)
- **P**: Placidus (Плацидус)
- **Q**: Pullen SR (Пуллен SR)
- **R**: Regiomontanus (Региомонтан)
- **S**: Sripati (Шрипати)
- **T**: Polich/Page (Полич/Пейдж)
- **U**: Krusinski-Pisa-Goelzer (Крусински-Пиза-Гольцер)
- **V**: Equal/Vehlow (Равные Велова)
- **W**: Equal/Whole Sign (Равные/Целый знак)
- **X**: Axial rotation system/Meridian houses (Осевая ротация/Меридианные дома)
- **Y**: APC houses (APC дома)

Обычно стандартной системой домов является Плацидус (P).

Пример API-запроса:

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "longitude": 0,
        "latitude": 51.4825766,
        "city": "London",
        "nation": "GB",
        "timezone": "Europe/London",
        "name": "John Doe",
        "zodiac_type": "Tropic",
        "house_system": "A"
    }
}
```


### Типы перспективы

PerspectiveType определяет точку зрения, с которой рассчитываются положения небесных тел.

**Объяснение:** Планеты можно наблюдать с разных точек — с Земли, с Солнца или с конкретного места на поверхности Земли. Это влияет на вычисляемые положения.

Доступные опции:

- "Apparent Geocentric": Геоцентрическая (с центром на Земле) и показывает видимые положения небесных тел, как их видно с Земли. Это наиболее часто используемая и стандартная перспектива.
- "Heliocentric": Гелиоцентрическая (с центром на Солнце).
- "Topocentric": Эта перспектива основана на конкретном местоположении наблюдателя на поверхности Земли.
- "True Geocentric": Эта перспектива также с центром на Земле, но показывает истинные положения небесных тел без видимых сдвигов, вызванных атмосферой Земли.
  
Обычно стандартной перспективой является "Apparent Geocentric" (Видимая геоцентрическая).

Пример использования в API-запросе:

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "longitude": 0,
        "latitude": 51.4825766,
        "city": "London",
        "nation": "GB",
        "timezone": "Europe/London",
        "name": "John Doe",
        "zodiac_type": "Tropic",
        "perspective": "Heliocentric"
    }
}
```


### Карты только с колесом

Чтобы сгенерировать карты, содержащие только зодиакальное колесо без текстовой информации, вы можете использовать опцию `wheel_only` в вашем API-вызове. Когда эта опция установлена в `True`, будет возвращено только зодиакальное колесо.

Пример API-запроса:

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "longitude": 0,
        "latitude": 51.4825766,
        "city": "London",
        "nation": "GB",
        "timezone": "Europe/London",
        "name": "John Doe",
        "zodiac_type": "Tropic"
    },
    "wheel_only": true
}
```


Это может быть полезно для создания чистых и простых визуальных представлений зодиака без дополнительной информации.

## Часовые пояса

Точные астрологические расчёты требуют правильного часового пояса. Обратитесь к следующей ссылке для полного списка часовых поясов:

[Список часовых поясов базы данных TZ](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

#### Активные точки и аспекты

Для всех эндпоинтов Charts (Birth Chart, Transit Chart), Natal Aspects Data и Synastry Aspects Data вы можете настроить, какие небесные точки включать и какие аспекты вычислять, используя параметры `active_points` и `active_aspects`.

**Объяснение:** 
- **Активные точки (active_points)**: Вы можете выбрать, какие планеты и точки включить в расчёт (например, только основные планеты или добавить астероиды, лунные узлы).
- **Активные аспекты (active_aspects)**: Аспекты — это углы между планетами (0°, 60°, 90°, 120°, 180°). Каждый аспект имеет своё значение и влияние. Параметр "orb" (орбис) определяет допустимое отклонение от точного угла.

Пример API-запроса:

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "longitude": 0,
        "latitude": 51.4825766,
        "city": "London",
        "nation": "GB",
        "timezone": "Europe/London",
        "name": "John Doe",
        "zodiac_type": "Tropic"
    },
    "active_points": [
        "Sun",
        "Moon",
        "Mercury",
        "Venus",
        "Mars",
        "Jupiter",
        "Saturn",
        "Uranus",
        "Neptune",
        "Pluto",
        "Mean_Node",
        "Chiron",
        "Ascendant",
        "Medium_Coeli",
        "Mean_Lilith",
        "Mean_South_Node"
    ],
    "active_aspects": [
        {
            "name": "conjunction",
            "orb": 10
        },
        {
            "name": "opposition",
            "orb": 10
        },
        {
            "name": "trine",
            "orb": 8
        },
        {
            "name": "sextile",
            "orb": 6
        },
        {
            "name": "square",
            "orb": 5
        },
        {
            "name": "quintile",
            "orb": 1
        }
    ]
}
```


Эти параметры позволяют вам:
- Указать, какие небесные точки включить в карту и расчёты
- Определить, какие аспекты вычислять вместе с их орбисами (степенью допустимого отклонения от точного аспекта)

## Автоматические координаты

Возможно использовать автоматические координаты, если вы не хотите реализовывать отдельный метод для расчёта широты, долготы и часового пояса.

Для этого вы должны передать параметр `geonames_username` внутри объекта `subject` в каждом запросе, содержащем объект `subject`.

**Логика**

- Если `geonames_username` присутствует, параметры `longitude`, `latitude` и `timezone` автоматически игнорируются.
- Если **НЕ** присутствует, все три параметра (`longitude`, `latitude` и `timezone`) должны быть указаны.

**Рекомендация**

Рекомендуется использовать реальные координаты напрямую для большей точности.

**Получение имени пользователя Geonames**

Если вы хотите рассчитывать координаты автоматически, вам нужно получить `username` для сервиса часовых поясов Geonames. Сервис бесплатен для до **10 000 запросов в день**.
Вы можете получить имя пользователя Geonames, зарегистрировавшись на <a href="http://www.geonames.org/login" target="_blank">Geonames</a>.

**Пример**

```json
{
    "subject": {
        "year": 1980,
        "month": 12,
        "day": 12,
        "hour": 12,
        "minute": 12,
        "city": "Jamaica, New York",
        "nation": "US",
        "name": "John Doe",
        "zodiac_type": "Tropic",
        "geonames_username": "YOUR_GEONAMES_USERNAME"
    }
}
```


## Авторские права и лицензия

Astrologer API является свободным программным обеспечением с открытым исходным кодом с лицензией AGPLv3. Все условия лицензии AGPLv3 применяются к Astrologer API.
Вы можете ознакомиться с исходным кодом и внести свой вклад через официальные репозитории:

- [V4 Astrologer API](https://github.com/g-battaglia/v4.astrologer-api)

Astrologer API разработан Джакомо Батталья и основан на Kerykeion, библиотеке Python для астрологических расчётов того же автора. Базовые инструменты построены на Swiss Ephemeris.

Поскольку это внешний API-сервис, интеграция данных и карт, полученных через API, не накладывает никаких лицензионных ограничений, позволяя использование в проектах с закрытыми лицензиями.

## Коммерческое использование

Astrologer API может свободно использоваться как в проектах с открытым исходным кодом, так и в коммерческих приложениях с закрытым исходным кодом без ограничений, поскольку он функционирует как внешний сервис.

Для полного соответствия мы рекомендуем добавить это заявление в ваши Условия использования или в другое место на вашем сайте/в приложении:

---
Астрологические данные и карты на этом сайте генерируются с помощью [AstrologerAPI](https://rapidapi.com/gbattaglia/api/astrologer), стороннего сервиса с открытым исходным кодом, лицензированного под AGPL v3. Исходный код:
- [Astrologer API Github](https://github.com/g-battaglia/Astrologer-API)
---

Это гарантирует полную прозрачность и полное соблюдение лицензионных требований, не оставляя места для сомнений.

## Контакты и поддержка

Нужна помощь или есть отзывы? Свяжитесь с нами:
[kerykeion.astrology@gmail.com](mailto:kerykeion.astrology@gmail.com)
